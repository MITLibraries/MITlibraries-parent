function oldIESearch(){$("html").hasClass("lte-ie9")&&($("#resources, .wrap-select--resources .selected").remove(),$(".wrap-select--resources").append('<select id="resources-select"></select'),$("#resources-select").append('<option value="option-1">Articles, e-books, &amp; more</option>').append('<option value="option-2">E-Journals &amp; databases</option>').append('<option value="option-3">Books &amp; more at MIT</option>').append('<option value="option-4">Books &amp; more worldwide</option>').append('<option value="option-5">Course Reserves</option>').append('<option value="option-6">Site Search</option>'),$("#resources-select").change(function(){$("#search-main form").removeClass("input-submit active"),$("#search-main input").removeClass("active");var e=$("#resources-select option:selected").val();$("#search-main input."+e).parent().addClass("active input-submit"),$("#search-main input."+e).addClass("active"),$(".keywords").parent().removeClass("active"),$(".keywords").removeClass("active"),$("#search-main .keywords."+e).addClass("active"),$("#search-main .keywords."+e).parent().addClass("active");var a=$("#resources li.active").attr("data-target");$("#search-main a.search-advanced").removeClass("active"),$("#search-main a.search-advanced."+a).addClass("active")}))}function InitAnalytics(){$("html").hasClass("lte-ie9")?(TrackEvent("Discovery","Initial Tab",$("#resources-select option:selected"),1),$("#resources-select").change(function(){var e=$("#resources-select option:selected").val();switch(e){case"option-1":e="Articles, e-books, & more",intValue=1;break;case"option-2":e="E-journals & databases",intValue=2;break;case"option-3":e="Books & more at MIT",intValue=3;break;case"option-4":e="Books & more worldwide",intValue=4;break;case"option-5":e="Course reserves",intValue=5;break;case"option-6":e="Site search",intValue=6;break;default:e="Unknown option",intValue=7}TrackEvent("Discovery","Tab",e,intValue)})):(TrackEvent("Discovery","Initial Tab",$("#resources li").attr("data-target"),1),$("#resources").on("option-change",function(){var e=$("#resources li.active").attr("data-target");switch(e){case"bartonplus":e="Articles, e-books, & more",intValue=1;break;case"vera":e="E-journals & databases",intValue=2;break;case"barton":e="Books & more at MIT",intValue=3;break;case"worldcat":e="Books & more worldwide",intValue=4;break;case"course-reserves":e="Course reserves",intValue=5;break;case"site-search":e="Site search",intValue=6;break;default:e="Unknown option",intValue=7}TrackEvent("Discovery","Tab",e,intValue)}));$("#search-main form").on("submit",function(e){var a,t;switch(t=-1,$(this).attr("id")){case"bartonplus":switch(t=100,a=$("#search-main input.active").val(),$("#search-main select.active option:selected").val()){case"TI ":t=106,a="a2_"+a;break;case"AU ":t=115,a="a3_"+a;break;default:t=101,a="a1_"+a}break;case"vera":switch(a=$("#search-main input.active").val(),t=200,$('#search-main form.active input[name="param_textSearchType_value"]:checked').val()){case"contains":t=201,a="b1_ "+a;break;case"startsWith":t=208,a="b2_ "+a;break;case"exactMatch":t=216,a="b3_ "+a;break;default:t=200}break;case"barton":switch(a=$("#search-main input.active").val(),t=300,$('#search-main form.active input[name="code"]:checked').val()){case"scan_TTL":t=310,a="c2_ "+a;break;case"scan_AUT":t=320,a="c3_ "+a;break;case"scan_CND":t=331,a="c4_ "+a;break;default:t=301,a="c1_ "+a}break;case"worldcat":switch(a=$("#search-main input.active").val(),t=300,$("#search-main select.active option:selected").val()){case"author":t=353,a="c6_ "+a;break;case"title":t=363,a="c7_ "+a;break;default:t=343,a="c5_"+a}break;case"course-reserves":switch(a=$("#search-main input.active").val(),t=400,$('#search-main form.active input[name="code"]:checked').val()){case"find_WIN":t=414,a="d2_ "+a;break;case"find_WOU":t=428,a="d3_ "+a;break;default:t=401,a="d1_ "+a}break;case"site-search":t=501,a="f1_"+(a=$("#search-main input.active").val())}TrackEvent("Discovery","Search",a,t)})}function TrackEvent(e,a,t,n){ga("send",{hitType:"event",eventCategory:e,eventAction:a,eventLabel:t,eventValue:n})}function showSubmitted(e){$("form#"+e+" :input").each(function(e,a){alert(e+" | "+a.name+" | "+a.value)})}$(function(){function e(){var e=$("#search-main select.active option:selected").val();$("#bartonplus.active").length&&(""==e&&$("input.active").attr("placeholder","ex: carbon nanotubes"),"TI "==e&&$("input.active").attr("placeholder","ex: freakonomics"),"AU "==e&&$("input.active").attr("placeholder","ex: noam chomsky")),$("#vera.active").length&&("contains"==e&&$("input.active").attr("placeholder","ex: new eng j of med"),"startsWith"==e&&$("input.active").attr("placeholder","ex: journal of cell biology"),"exactMatch"==e&&$("input.active").attr("placeholder","ex: web of science")),$("#barton.active").length&&("find_WRD"==e&&$("input.active").attr("placeholder","ex: game design"),"scan_TTL"==e&&$("input.active").attr("placeholder","ex: introduction to fluid mechanics"),"scan_AUT"==e&&$("input.active").attr("placeholder","ex: shakespeare william"),"scan_CND"==e&&$("input.active").attr("placeholder","ex: ta405.t5854")),$("#worldcat.active").length&&("keyword"==e&&$("input.active").attr("placeholder","ex: carbon nanotubes"),"author"==e&&$("input.active").attr("placeholder","ex: william shakespeare"),"title"==e&&$("input.active").attr("placeholder","ex: introduction to fluid mechanics")),$("#course-reserves.active").length&&("scan_CNB"==e&&$("input.active").attr("placeholder","ex: 21F.108"),"find_WIN"==e&&$("input.active").attr("placeholder","ex: cohen"),"find_WOU"==e&&$("input.active").attr("placeholder","ex: introduction chemistry"))}function a(){$("#search-main select.active option:selected").val();$("#search-main select.active").change(function(){$("#search-main select.active option:selected").val();e()})}function n(){var e=$("#search-main select.active").val();$("#search-main form .hidden-fields").html(""),$("#bartonplus.active").length&&$("#bartonplus .hidden-fields").append("<input name='direct' value='true' type='hidden'>").append("<input name='scope' value='site' type='hidden'>").append("<input name='site' value='eds-live' type='hidden'>").append("<input name='authtype' value='ip,guest' type='hidden'>").append("<input name='custid' value='s8978330' type='hidden'>").append("<input name='profile' value='eds' type='hidden'>").append("<input name='groupid' value='main' type='hidden'>").append('<input name="bquery" value="" type="hidden">'),$("#vera.active").length&&($("#vera .hidden-fields").append("<input type='hidden' name='param_perform_save' value='searchTitle' />").append("<input type='hidden' name='param_chinese_checkbox_save' value='0' />").append("<input type='hidden' name='param_type_save' value='textSearch' />").append("<input type='hidden' name='param_type_value' value='textSearch' />").append("<input type='hidden' name='param_jumpToPage_value' value='' />").append("<input type='hidden' name='param_services2filter_save' value='getAbstract' />").append("<input type='hidden' name='param_services2filter_save' value='getFullTxt' />"),"contains"==e&&$("#vera").append('<input type="radio" name="param_textSearchType_value" id="contains" value="contains" checked="checked" class="radio" />'),"startsWith"==e&&$("#vera").append('<input type="radio" name="param_textSearchType_value" id="startsWith" value="startsWith" class="radio" checked="checked" />'),"exactMatch"==e&&$("#vera").append('<input type="radio" name="param_textSearchType_value" id="exactMatch" value="exactMatch" class="radio" checked="checked" />')),$("#barton.active").length&&($("#barton").append("<input type='hidden' name='func' value='scan'/>"),"find_WRD"==e&&$("#barton").append('<input type="radio" name="code" id="bartonkeyword" value="find_WRD" checked="checked" class="radio" />'),"scan_TTL"==e&&$("#barton").append('<input type="radio" name="code" id="bartontitle" value="scan_TTL" class="radio" checked="checked" />'),"scan_AUT"==e&&$("#barton").append('<input type="radio" name="code" id="bartonauthor" value="scan_AUT" class="radio" checked="checked" />'),"scan_CND"==e&&$("#barton").append('<input type="radio" name="code" id="bartoncallnumber" value="scan_CND" class="radio" checked="checked" />')),$("#worldcat.active").length&&$("#worldcat .hidden-fields").append("<input type='hidden' name='qt' value='wc_org_mit'/>").append("<input type='hidden' name='qt' value='affiliate'/>"),$("#course-reserves.active").length&&($("#course-reserves .hidden-fields").append("<input type='hidden' name='func' value=''/>"),"scan_CNB"==e&&$("#course-reserves").append('<input name="code" id="coursenumber" value="scan_CNB" checked="checked" type="radio" class="radio" />'),"find_WIN"==e&&$("#course-reserves").append('<input name="code" id="instructorkeyword" value="find_WIN" type="radio" class="radio" checked="checked" />'),"find_WOU"==e&&$("#course-reserves").append('<input name="code" id="coursenamekeyword" value="find_WOU" type="radio" class="radio" checked="checked" />')),$("#site-search.active").length&&$("#site-search .hidden-fields").append('<input type="hidden" name="cx" value="016240528703941589557:i7wrbu9cdxu" />').append('<input type="hidden" name="ie" value="UTF-8" />')}function t(){$("#search-main form").removeClass("input-submit active"),$("#search-main input").removeClass("active"),$(".keywords").parent().removeClass("active"),$(".keywords").removeClass("active"),$("#search-main a.search-advanced").removeClass("active")}function i(){var e={};return e.resource=$("#resources li.active").attr("data-option"),e.tool=$("#resources li.active").attr("data-target"),e}function r(){return $("#search-main select.active option:selected").val()}function c(e){return $("#resources li."+e.tool).addClass("active"),$("#search-main input."+e.tool).parent().addClass("active input-submit"),$("#search-main input."+e.tool).addClass("active"),$("#search-main .keywords."+e.tool).addClass("active"),$("#search-main .keywords."+e.tool).parent().addClass("active"),$("#search-main a.search-advanced."+e.tool).addClass("active"),a(),e}$("#resources").on("click","li",function(e){var a=$("#resources li");if(!$(this).hasClass("has-link")){$(this).parent().toggleClass("active"),$(a).removeClass("active"),$(this).toggleClass("active");var t=$("#resources li.active .main").text();$("#resources").hasClass("active")?$(".wrap-select--resources .selected").text(t).append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="8.071px" height="14px" viewBox="0 0 8.071 14" enable-background="new 0 0 8.071 14" xml:space="preserve" class="select-arrows"><path d="M0.069 8.74c0.08-0.159 0.252-0.264 0.436-0.274 0.023 0 1.743-0.104 3.531-0.104s3.508 0.104 3.53 0.104C7.751 8.476 7.911 8.581 8.003 8.74c0.092 0.161 0.092 0.356 0 0.517 -1.364 2.431-3.508 4.517-3.6 4.598 -0.206 0.194-0.528 0.194-0.734 0 -0.091-0.081-2.235-2.167-3.6-4.598C-0.023 9.096-0.023 8.901 0.069 8.74M8.003 5.259c-0.08 0.16-0.252 0.264-0.437 0.275 -0.022 0-1.742 0.103-3.53 0.103S0.528 5.535 0.505 5.535C0.321 5.523 0.161 5.419 0.069 5.259c-0.092-0.161-0.092-0.355 0-0.516 1.365-2.431 3.508-4.517 3.6-4.598 0.206-0.194 0.528-0.194 0.734 0 0.092 0.081 2.235 2.167 3.6 4.598C8.095 4.904 8.095 5.099 8.003 5.259"></path></svg>').addClass("active"):($(".wrap-select--resources .selected").text("").removeClass("active"),$("#search-main input").val(""),$(this).trigger("search-change"))}}),$(document).on("click",function(e){0!=!$("#resources.active").has(e.target).length&&($("#resources").removeClass("active"),$("#search-main .selected").removeClass("active").text(""),a())}),$("#search-main").on("click","#resources",function(e){t(),state=i(),c(state)}),$("#search-main").on("option-change",function(){a(),e()}),$("#search-main form").on("submit",function(){!function(){"use strict";var e={},a="";Modernizr.localstorage&&(a=i(),e.tool=a.tool,e.refine=r(),localStorage.setItem("tool",e.tool),localStorage.setItem("refine",e.refine))}(),$('#search-main input[type="hidden"], #search-main input[type="radio"]').remove();var e=$("input.active",this).val();if(""==e)return alert("Please enter a search term."),!1;var a=$("#search-main select.active").val(),t="";$("#bartonplus.active").length&&($("#bartonplus").attr("action","https://search.ebscohost.com/login.aspx").attr("method","get").attr("target","_top"),n(),$('input[name="bquery"]',this).val((a+e).replace(/"/g,"&quot;"))),$("#vera.active").length&&($("#vera").attr("action","https://owens.mit.edu/sfx_local/az/mit_all").attr("name","az_user_form").attr("method","get").attr("accept-charset","UTF-8").addClass("searchform"),n(),$("input.active",this).attr("name","param_pattern_value").attr("id","param_pattern_value").addClass("searchtext").val(e)),$("#barton.active").length&&(t=a.split("_"),$("#barton").addClass("searchform").attr("action","https://library.mit.edu/F/").attr("name","booksearch").attr("method","get"),n(),$("input.active",this).attr("name","request").attr("type","text").attr("id","bookrequest").val(e),$('#barton input[name = "code"]:checked').val(t[1]),"find"==t[0]||"F8"==t[0]?($("#barton .hidden-fields").append("<input type='hidden' name='func' value='find-b'/>"),$("#barton input[name = 'code']").attr("name","find_code")):($("#barton .hidden-fields").append("<input type='hidden' name='func' value='scan'/>"),$("#barton input[name = 'code']").attr("name","scan_code"),$("#barton input.searchtext").attr("name","scan_start"))),$("#worldcat.active").length&&($(this).attr("action","https://mit.worldcat.org/search"),n(),$("input.active",this).attr("method","get"),"keyword"==a&&$("input.active",this).attr("name","q").val(e),"author"==a&&(e="au:"+$("input.active",this).val(),$("#worldcat.active").append('<input type="hidden" name="q" value="'+e+'" />')),"title"==a&&(e="ti:"+$("input.active",this).val(),$("#worldcat.active").append('<input type="hidden" name="q" value="'+e+'" />'))),$("#course-reserves.active").length&&($("#course-reserves").addClass("searchform").addClass("barton").attr("action","https://library.mit.edu/F/").attr("method","get").attr("name","getInfo"),$("input.active",this).attr("name","request").val(e),n(),t=a.split("_"),$("#course-reserves input[name = 'code']:checked").val(t[1]),$("#course-reserves .hidden-fields").append("<input type='hidden' name='local_base' value='u-mit30'/>"),"find"==t[0]?($("#course-reserves .hidden-fields input[name = 'func']").val("find-b"),$("#course-reserves input[name = 'code']").attr("name","find_code")):($("#course-reserves .hidden-fields input[name = 'func']").val("scan"),$("#course-reserves input[name = 'code']").attr("name","scan_code"),$("#course-reserves input[name = 'request']").attr("name","scan_start"))),$("#site-search.active").length&&($(this).attr("action","https://www.google.com/cse"),n(),$("input.active",this).attr("name","q").val(e),$("button",this).attr("name","sa").attr("value","Search"))});var s,o=function(){"use strict";var e={status:"unsupported",tool:"bartonplus",refine:""};return Modernizr.localstorage&&(null!==localStorage.getItem("tool")?(e.status="return visit",e.tool=localStorage.getItem("tool"),e.refine=localStorage.getItem("refine")):e.status="first visit"),e.resource=$("#resources").children("."+e.tool).attr("data-option"),e}();s=o,t(),$("#resources li").removeClass("active"),$("#search-main .keywords."+s.tool).val(s.refine),c(s),e()}),$(function(){oldIESearch()}),$(document).ready(function(){InitAnalytics()});